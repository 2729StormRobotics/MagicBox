language: java

sudo: false

install: true

addons:
  sonarcloud:
    organization: "storm-robotics-2729-github"
    token:
      secure: "b6x9l1BGOfS0izReTg+X4rEsNYH5pge4Je+LDVICg0rgxw274djnydQ4EXAgmgLPvzw95yvHjdr7HqclXnTlwap4yWOl6HeY0OvnV8ZPlMpw8W2tVoRaWlJKODRKN57gKjAQNpJaBpoO1Gsf0PK/U3SzdeN74eHVdYA+B0/Ry22PfZwAwwj8wflu1WdXI78oma6UbnVSD2iQ5N5rfFfVVfWevNFdGZ+UJRReFR30e9E5hOY8/ZkQSMRpZf+4WXzPRWzrN7EvHCmcX9SwAFEf4EZ89v/9sAtvUyRp+md+Nv38ioyZ5RLxTE/EOAT4lThEGZro6H2X/oM+OqEclXRSJx2wZ0XEpnqnvbyGoSwb3nKmsaQvq95MggHaHWTLaQHefu3XQC/bgwVcbDVODE4KTjelvdEQRrtuaof8k4fK6JFGpz7wwzm4lgaSeJYcTUcZ7fObVpZiycgcv4wfemcwT9h8sU0lK84IGldhVJOPjQ+9lt0STXEU8ekQMVDDKBHnfyYkMVzTnkoFAx4T7Y3AM8OzPbgefrxWbzTz2Ze1qGgWEA0YMuUsybgJDuzs7IdKqdPnRvf/RTCYYDbLvMQaRcPryV96SuPuu6SdEzrA4qye7PesXfO5gwXpkl6WrZ/UY7W6u9xfR0glkigXQWZEg/C76ID3X8hReDmMefdrprc="
  apt:
    packages:
      - oracle-java8-installer

jdk:
  - openjdk8
  - oraclejdk8

script:
  - git fetch --unshallow
  - ./gradlew build
  - ./gradlew sonarqube

before_cache:
  - rm -f  '$HOME/.gradle/caches/modules-2/modules-2.lock'
  - rm -fr '$HOME/.gradle/caches/*/plugin-resolution/'

cache:
  directories:
    - '$HOME/.gradle/caches/'
    - '$HOME/.gradle/wrapper/'
    - '$HOME/.m2/repository'
    - '$HOME/.sonar/cache'
    - '$HOME/.gradle'
    - '.gradle'
